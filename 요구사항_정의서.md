# LLM 기반 보안 로그 분석 및 시각화 플랫폼 요구사항 정의서 (최종 v4 기준)

- **프로젝트 명**: LLM과 RAG를 활용한 지능형 보안 관제 대시보드
- **문서 버전**: v2.0 (V4 완료 시점)
- **작성일**: 2025년 11월 17일
- **작성자**: Gemini

---

## 1. 프로젝트 개요

본 프로젝트는 대량의 보안 로그 데이터를 LLM(대규모 언어 모델)과 RAG(검색 증강 생성) 기술을 활용하여 분석하고, 그 결과를 직관적인 대시보드로 시각화하는 것을 목표로 한다. 이를 통해 보안 관제사가 위협을 신속하게 탐지, 분석, 대응하고, 자연어 기반의 대화형 검색을 통해 로그 데이터로부터 깊이 있는 인사이트를 확보할 수 있는 지능형 보안 관제 플랫폼을 구축한다.

- **최종 결과**: 초기 목표를 발전시켜, **실시간 관제, 상세 분석, AI 리포팅, 사고 대응**의 4가지 핵심 기능을 갖춘 **V4 통합 보안 대시보드**를 성공적으로 구축 완료함.

---

## 2. 주요 기능 (High-Level Features)

- **데이터 처리 및 저장**: 다양한 포맷의 보안 로그를 수집, 정규화하고 분석에 용이한 형태로 변환하여 Vector DB에 저장한다.
- **LLM 기반 분석 및 검색**: 자연어 질의를 이해하고, RAG 기술을 활용해 관련 로그를 신속하게 검색 및 분석/요약한다.
- **시각화 대시보드**: 로그 분석 결과를 기반으로 위협 통계, 추이, 실시간 현황을 다양한 차트와 테이블로 시각화한다.
- **사용자 인터페이스**: 보안 관제사가 손쉽게 시스템과 상호작용할 수 있는 직관적인 UI/UX를 제공한다.

---

## 3. 요구사항 상세

#### 데이터 처리 및 저장 (Data Processing & Storage)
| 아이디 | 요구사항 명 | 상세 설명 | 중요도 | 구현 상태 및 결과 (V4) |
| :--- | :--- | :--- | :--- | :--- |
| REQ-DP-001 | 다양한 유형의 CSV 로그 수집 | `CSV Files` 폴더에 분류된 다양한 유형의 로그를 안정적으로 읽어들일 수 있어야 한다. | **상** | ✅ **완료**. `vector_db_builder.py`가 모든 하위 폴더의 CSV를 재귀적으로 탐색하여 DB를 구축하며, 대시보드에서도 모든 CSV 파일을 선택하여 분석할 수 있다. |
| REQ-DP-002 | 표준 JSON 포맷으로 변환 | 로드된 CSV 파일들을 일관된 JSON 구조로 변환한다. | **상** | ⚠️ **변경/대체**. JSON 변환 대신, 각 로그(행)를 의미 있는 텍스트 문장으로 변환(`row_to_text`)하는 방식으로 변경. 이는 LLM 임베딩 모델이 로그의 컨텍스트를 더 잘 이해하도록 하기 위함이며, 동일한 목적을 더 효과적으로 달성함. |
| REQ-DP-003 | 텍스트 임베딩 | 로그 데이터를 벡터로 변환한다. | **상** | ✅ **완료**. `vector_db_builder.py`에서 `Sentence-Transformers` 모델(`all-MiniLM-L6-v2`)을 사용하여 모든 로그를 고차원 벡터로 변환 후 저장한다. |
| REQ-DP-004 | Vector DB 구축 | FAISS 기반 벡터 저장소를 생성한다. | **상** | ✅ **완료**. FAISS를 사용하여 벡터 인덱스를 구축하고 로컬 `vector_db/` 경로에 저장한다. `test_vector_search.py`를 통해 검색 테스트가 가능하다. |

#### LLM 기반 분석 및 검색 (LLM-based Analysis & Search)
| 아이디 | 요구사항 명 | 상세 설명 | 중요도 | 구현 상태 및 결과 (V4) |
| :--- | :--- | :--- | :--- | :--- |
| REQ-LLM-001 | 자연어 검색 | 사용자가 입력한 자연어 질의로 로그를 검색한다. | **상** | ❌ **미적용**. 프로젝트 방향이 '사용자 질의 기반 검색'에서 '자동화된 실시간 분석 및 리포팅'으로 발전하며 해당 기능은 제외됨. 대신, 분석된 결과에 대해 AI 리포트를 생성하는 기능으로 대체됨. |
| REQ-LLM-002 | 검색 결과 기반 분석 및 요약 | 검색된 로그들을 바탕으로 LLM이 요약 리포트를 생성한다. | **상** | ✅ **부분 완료**. '리포팅 및 인사이트' 페이지에서 사용자가 선택한 **분석 파일 전체**에 대해 LLM이 전문적인 분석 및 요약 보고서를 생성하는 기능으로 구현됨. |
| REQ-LLM-003 | 위협 분류 | 로그 기반 위협 유형 및 심각도 분석 | 단일 로그를 LLM에 제공하여 위협 유형과 심각도를 분석한다. | **중** | ✅ **완료**. `V4_log_analyzer`의 핵심 로직. 벡터 검색으로 유사 로그를 찾고, 투표 방식으로 위협 유형을 분류하며, 유사도 점수를 기반으로 확신도를 계산하여 심각도를 판단한다. |

#### 시각화 대시보드 (Visualization Dashboard)
| 아이디 | 요구사항 명 | 상세 설명 | 중요도 | 구현 상태 및 결과 (V4) |
| :--- | :--- | :--- | :--- | :--- |
| REQ-DASH-001 | 종합 위협 현황판 | 전체 시스템의 보안 상태를 요약하여 보여준다. | **상** | ✅ **완료**. '실시간 보안 관제' 페이지 상단에 `st.metric`을 사용하여 총 처리 로그, 악성/정상 로그 수, 평균 확신도 등을 실시간으로 표시한다. |
| REQ-DASH-002 | 통계 시각화 | 위협 유형 분포를 차트로 시각화한다. | **상** | ✅ **완료**. '실시간 보안 관제' 및 '상세 로그 분석' 페이지 모두에서 공격 유형 분포를 Plotly 바 차트로 시각화하여 제공한다. |
| REQ-DASH-003 | 추이 시각화 | 시간별 위협 발생 추이를 라인 차트로 시각화한다. | **중** | ✅ **완료**. '실시간 보안 관제' 페이지에서 '시간에 따른 악성 탐지 확신도'를 보여주는 산점도(Scatter Plot)로 구현하여, 시간대별 위협의 강도를 직관적으로 파악할 수 있도록 개선됨. |
| REQ-DASH-004 | 로그 테이블 | 실시간 위협 로그 목록을 테이블로 제공한다. | **상** | ✅ **완료**. '실시간 보안 관제' 페이지 하단에 탐지된 최신 악성 로그 목록을 테이블 형태로 제공한다. |

#### 사용자 인터페이스 (User Interface)
| 아이디 | 요구사항 명 | 상세 설명 | 중요도 | 구현 상태 및 결과 (V4) |
| :--- | :--- | :--- | :--- | :--- |
| REQ-UI-001 | 대화형 검색창 | 자연어 질의 입력 인터페이스를 제공한다. | **상** | ❌ **미적용**. `REQ-LLM-001`과 동일한 사유로 제외됨. |
| REQ-UI-002 | 드릴다운(Drill-down) 기능 | 특정 로그 클릭 시 상세 정보를 보여준다. | **중** | ✅ **완료**. '실시간 보안 관제'에서 고위험 위협 탐지 시 모달(Modal) 팝업으로 상세 정보를 표시하고, '사고 대응' 페이지로 이동하여 심층적인 대응 조치를 수행하는 워크플로우로 구현됨. |
| REQ-UI-003 | 필터링 | 대시보드 데이터 필터링 옵션을 제공한다. | **중** | ✅ **부분 완료**. '상세 로그 분석' 페이지에서 분석 결과에 대해 '전체/악성만/정상만'으로 필터링하는 기능을 제공한다. 날짜 등 복합 필터는 제외됨. |

#### 시스템 및 비기능 (System & Non-Functional)
| 아이디 | 요구사항 명 | 상세 설명 | 중요도 | 구현 상태 및 결과 (V4) |
| :--- | :--- | :--- | :--- | :--- |
| REQ-SYS-001 | 프로젝트 환경 설정 | `requirements.txt`를 통한 간편한 라이브러리 설치. | **상** | ✅ **완료**. `requirements.txt` 파일이 제공되며, `pip install -r requirements.txt` 명령어로 모든 의존성 패키지를 설치할 수 있다. |
| REQ-SYS-002 | 간편 실행 스크립트 | `run_dashboard.sh` 셸 스크립트를 제공한다. | **중** | ✅ **완료**. `run_dashboard.sh` 파일이 존재하며, `streamlit run V4_dashboard.py` 명령을 실행한다. |
| REQ-SYS-003 | 모듈화된 코드 | 기능별로 Python 파일을 분리한다. | **상** | ✅ **완료**. `V4_dashboard.py`(UI/페이지 로직)와 `V4_log_analyzer.py`(핵심 분석 로직)로 코드가 명확하게 분리되어 유지보수성과 재사용성을 높였다. |
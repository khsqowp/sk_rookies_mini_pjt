# LLM 기반 보안 로그 분석 및 시각화 플랫폼 요구사항 정의서

- **프로젝트 명**: LLM과 RAG를 활용한 지능형 보안 관제 대시보드
- **문서 버전**: v1.0
- **작성일**: 2025년 11월 17일
- **작성자**: Gemini

---

## 1. 프로젝트 개요

본 프로젝트는 대량의 보안 로그 데이터를 LLM(대규모 언어 모델)과 RAG(검색 증강 생성) 기술을 활용하여 분석하고, 그 결과를 직관적인 대시보드로 시각화하는 것을 목표로 한다. 이를 통해 보안 관제사가 위협을 신속하게 탐지, 분석 및 예측하고, 자연어 기반의 대화형 검색을 통해 로그 데이터로부터 깊이 있는 인사이트를 확보할 수 있는 지능형 보안 관제 플랫폼을 구축한다.

- **기대 효과**:
  - **업무 효율성 증대**: 반복적인 로그 분석 작업을 자동화하고, 자연어 질의를 통해 분석 시간을 단축한다.
  - **탐지 정확도 향상**: LLM의 문맥 이해 능력을 활용하여 기존 패턴 기반 탐지 시스템이 놓칠 수 있는 신종/변종 위협을 식별한다.
  - **신속한 의사결정 지원**: 위협 현황, 통계, 분석 결과를 시각적으로 제공하여 관제사의 신속하고 정확한 의사결정을 돕는다.

---

## 2. 주요 기능 (High-Level Features)

- **데이터 처리 및 저장**: 다양한 포맷의 보안 로그를 수집, 정규화하고 분석에 용이한 형태로 변환하여 Vector DB에 저장한다.
- **LLM 기반 분석 및 검색**: 자연어 질의를 이해하고, RAG 기술을 활용해 관련 로그를 신속하게 검색 및 분석/요약한다.
- **시각화 대시보드**: 로그 분석 결과를 기반으로 위협 통계, 추이, 실시간 현황을 다양한 차트와 테이블로 시각화한다.
- **사용자 인터페이스**: 보안 관제사가 손쉽게 시스템과 상호작용할 수 있는 직관적인 UI/UX를 제공한다.

---

## 3. 요구사항 상세

#### 데이터 처리 및 저장 (Data Processing & Storage)
| 아이디 | 구분 | 요구사항 명 | 상세 설명 | 중요도 | 검수 조건 (Acceptance Criteria) | 비고 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| REQ-DP-001 | 데이터 수집 | 다양한 유형의 CSV 로그 수집 | Adware, Ransomware, Benign 등 `CSV Files` 폴더에 분류된 다양한 유형의 로그를 안정적으로 읽어들일 수 있어야 한다. | **상** | 1. Python 스크립트가 지정된 경로의 모든 하위 폴더에 있는 `.csv` 파일을 재귀적으로 탐색하고 로드할 수 있다. | `log_analyzer_v2.py` 에서 구현 |
| REQ-DP-002 | 데이터 정규화 | 표준 JSON 포맷으로 변환 | 로드된 각기 다른 CSV 파일들을 분석에 용이하도록 'timestamp', 'source_ip', 'destination_ip', 'event_description', 'severity', 'log_type' 등의 필드를 포함하는 일관된 JSON 구조로 변환한다. | **상** | 1. `log_analyzer_v2.py` 실행 시 정규화된 데이터가 `output_analysis` 폴더 내에 JSON 파일로 생성된다.<br>2. 생성된 JSON 파일은 정의된 표준 필드를 모두 포함해야 한다. | |
| REQ-DP-003 | 텍스트 임베딩 | 로그 데이터 벡터화 | 정규화된 로그 데이터(특히 `event_description`)를 LLM이 이해할 수 있도록 텍스트 임베딩 모델을 사용하여 벡터로 변환한다. | **상** | 1. 로그 1건당 1개의 고차원 벡터가 생성되어야 한다.<br>2. 생성된 벡터는 후속 검색 프로세스에서 사용될 수 있는 형태여야 한다. | `vector_db_builder.py` 에서 처리.<br>임베딩 모델: `text-embedding-ada-002` 등 |
| REQ-DP-004 | Vector DB 구축 | FAISS 기반 벡터 저장소 생성 | 생성된 로그 벡터들을 의미 기반 검색(Semantic Search)이 가능하도록 FAISS 라이브러리를 사용하여 인덱싱하고, `vector_db/faiss_index` 경로에 파일로 저장한다. | **상** | 1. `vector_db_builder.py` 실행 시 `vector_db/faiss_index` 디렉토리가 생성되고 내부에 index 파일이 저장된다.<br>2. 생성된 인덱스는 `test_vector_search.py` 를 통해 검색 테스트가 가능해야 한다. | 로컬 환경에서의 빠른 검색을 위해 FAISS 사용 |

#### LLM 기반 분석 및 검색 (LLM-based Analysis & Search)
| 아이디 | 구분 | 요구사항 명 | 상세 설명 | 중요도 | 검수 조건 (Acceptance Criteria) | 비고 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| REQ-LLM-001 | 자연어 검색 | RAG 기반 의미론적 로그 검색 | 사용자가 입력한 자연어 질의(예: "최근에 발생한 랜섬웨어 공격 건")를 임베딩하여 Vector DB에서 가장 관련성 높은 로그들을 검색(Retrieve)한다. | **상** | 1. `test_vector_search.py` 실행 시, 특정 키워드에 대해 관련성이 높은 로그 N개가 반환된다.<br>2. "192.168.1.10에서 발생한 의심스러운 활동" 질의 시 해당 IP 관련 로그가 최상위 결과에 포함된다. | LangChain의 RAG 파이프라인 활용 검토 |
| REQ-LLM-002 | 생성 및 요약 | 검색 결과 기반 분석 및 요약 | RAG를 통해 검색된 로그들을 컨텍스트로 활용하여, 사용자 질의에 대한 구체적인 답변이나 요약 리포트(Generate)를 LLM을 통해 생성한다. | **상** | 1. "어제 발생한 주요 위협 3가지 요약해줘" 질의 시, LLM이 검색된 로그를 바탕으로 3가지 주요 위협을 식별하고 요약문을 생성한다.<br>2. 생성된 답변에는 날짜, 공격 유형, IP 정보 등 핵심적인 내용이 포함되어야 한다. | |
| REQ-LLM-003 | 위협 분류 | 로그 기반 위협 유형 및 심각도 분석 | 단일 또는 다수 로그를 LLM에 제공하여 위협 유형(e.g., Brute Force, DDoS)이 무엇인지, 심각도는 어느 수준(e.g., 높음, 중간, 낮음)인지 분석하고 태깅한다. | **중** | 1. "로그인 실패 100회 발생" 로그 입력 시, 'Brute Force 시도', '높음' 심각도로 분석 결과를 반환한다. | few-shot 프롬프팅 기법 활용 |

#### 시각화 대시보드 (Visualization Dashboard)
| 아이디 | 구분 | 요구사항 명 | 상세 설명 | 중요도 | 검수 조건 (Acceptance Criteria) | 비고 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| REQ-DASH-001 | 메인 대시보드 | **종합 위협 현황판** | 관제사가 가장 먼저 확인하는 페이지로, 전체 시스템의 보안 상태를 요약하여 보여준다. (전체 로그 수, 탐지된 위협 수, 심각도별 위협 수 등) | **상** | 1. `run_dashboard.sh` 실행 시 대시보드 웹페이지가 로드된다.<br>2. KPI 지표 (전체 위협 수 등)가 상단에 카드 형태로 표시된다. | Streamlit의 `st.metric` 활용 |
| REQ-DASH-002 | 통계 시각화 | 위협 유형 분포 차트 | 전체 기간 또는 선택된 기간 동안 탐지된 위협 유형(Adware, Ransomware 등)의 분포를 파이 차트 또는 바 차트로 시각화한다. | **상** | 1. 대시보드에 '위협 유형 분포' 차트가 표시된다.<br>2. 차트의 각 항목에 마우스를 올리면 정확한 수치가 툴팁으로 표시된다. | Plotly 등 라이브러리 연동 |
| REQ-DASH-003 | 추이 시각화 | 시간별 위협 발생 추이 | 시간(일/시)에 따른 위협 발생 빈도를 라인 차트로 시각화하여 특정 시간대에 공격이 집중되는지 파악할 수 있도록 한다. | **중** | 1. 대시보드에 '시간별 위협 추이' 라인 차트가 표시된다.<br>2. 차트의 X축은 시간, Y축은 위협 발생 건수여야 한다. | |
| REQ-DASH-004 | 로그 테이블 | 실시간 위협 로그 목록 | LLM이 '높음' 또는 '중간' 심각도로 분석한 로그들을 최신순으로 정렬된 테이블 형태로 제공한다. | **상** | 1. 테이블에는 '시간', '출발지 IP', '분석된 위협 유형', '심각도' 컬럼이 포함된다.<br>2. 테이블은 1분 주기로 자동 갱신되는 기능을 제공한다 (또는 수동 새로고침 버튼). | Streamlit의 `st.dataframe` 활용 |

#### 사용자 인터페이스 (User Interface)
| 아이디 | 구분 | 요구사항 명 | 상세 설명 | 중요도 | 검수 조건 (Acceptance Criteria) | 비고 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| REQ-UI-001 | 대화형 검색창 | 자연어 질의 입력 인터페이스 | 대시보드 내에 사용자가 자유롭게 자연어로 로그를 검색하고 질문할 수 있는 텍스트 입력창을 제공한다. | **상** | 1. 페이지 상단 또는 사이드바에 검색창이 고정되어 있어야 한다.<br>2. 검색 버튼 클릭 또는 Enter 키 입력 시 `REQ-LLM-001` 기능이 실행된다.<br>3. LLM의 답변은 채팅 형식으로 하단에 표시된다. | `st.text_input`, `st.chat_message` |
| REQ-UI-002 | 상세 정보 조회 | 드릴다운(Drill-down) 기능 | 위협 로그 테이블에서 특정 로그를 클릭하면 해당 로그의 원문 전체와 LLM의 상세 분석 결과(추천 대응 방안 포함)를 볼 수 있는 모달 팝업 또는 상세 페이지로 이동한다. | **중** | 1. 테이블의 행(row) 클릭 시 이벤트가 발생하여 상세 정보가 표시된다.<br>2. 상세 정보 창에는 '닫기' 버튼이 있어야 한다. | |
| REQ-UI-003 | 필터링 | 대시보드 데이터 필터링 | 사용자가 원하는 데이터만 필터링하여 볼 수 있도록 날짜/시간 범위 선택, 심각도 등급, 위협 유형별 필터링 옵션을 제공한다. | **중** | 1. 사이드바에 날짜 입력(Date Input), 심각도 선택(Selectbox) 컴포넌트가 위치한다.<br>2. 필터 값 변경 시 대시보드의 모든 차트와 테이블 데이터가 연동되어 갱신된다. | `st.sidebar`, `st.date_input` |

#### 시스템 및 비기능 (System & Non-Functional)
| 아이디 | 구분 | 요구사항 명 | 상세 설명 | 중요도 | 검수 조건 (Acceptance Criteria) | 비고 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| REQ-SYS-001 | 환경 구성 | **프로젝트 환경 설정** | `requirements.txt` 파일을 통해 프로젝트 실행에 필요한 모든 Python 라이브러리 의존성을 명시하고, `pip install -r requirements.txt` 명령어로 한번에 설치할 수 있도록 한다. | **상** | 1. 새로운 가상환경에서 해당 명령 실행 시 모든 패키지가 오류 없이 설치되어야 한다. | |
| REQ-SYS-002 | 실행 편의성 | **간편 실행 스크립트** | 사용자가 복잡한 명령어 없이 대시보드를 실행할 수 있도록 `run_dashboard.sh` 셸 스크립트를 제공한다. | **중** | 1. 터미널에서 `bash run_dashboard.sh` 실행 시 Streamlit 서버가 정상적으로 구동된다. | |
| REQ-SYS-003 | 코드 구조 | **모듈화된 코드** | 기능별(데이터 처리, DB 구축, 대시보드)로 Python 파일을 분리하여 코드의 재사용성과 유지보수성을 높인다. | **상** | 1. `log_analyzer_v2.py`, `vector_db_builder.py`, `dashboard_v2.py` 파일이 각각 독립적인 기능을 수행하도록 역할이 명확히 분리되어 있다. | |


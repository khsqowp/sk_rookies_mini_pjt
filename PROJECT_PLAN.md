# 프로젝트 계획 및 결과: V4 통합 보안 대시보드

## 1. 프로젝트 개요

### 1.1. 프로젝트 명
AI 기반 네트워크 위협 탐지 및 통합 분석 대시보드 (V4)

### 1.2. 프로젝트 상태: 🏁 완료

### 1.3. 최종 목표 (KPI)
- **통합 대시보드 구축**: 분산된 분석 스크립트를 단일의 다중 페이지 Streamlit 애플리케이션(`V4_dashboard.py`)으로 통합하여, 실시간 위협 관제부터 상세 분석, 리포팅, 사고 대응까지 일관된 사용자 경험을 제공한다.
- **실시간 탐지 및 대응 연계**: 로그 데이터 스트리밍을 시뮬레이션하고, 고위험 위협 탐지 시 경고 모달을 통해 즉시 '사고 대응' 페이지로 전환하는 동적인 워크플로우를 구현한다.
- **분석 엔진 고도화**: 텍스트 기반 유사도 검색(FAISS)과 LLM(OpenAI GPT)을 결합한 분석 엔진(`V4_log_analyzer.py`)을 구현하고, AI 기반 자동 보고서 생성 기능을 통해 분석의 깊이를 더한다.

---

## 2. 시스템 아키텍처 및 데이터 흐름 (최종)

1.  **데이터 준비 (DB 구축)**
    - `vector_db_builder.py`가 `CSV Files/` 디렉토리의 모든 로그 데이터를 읽어 텍스트로 변환 후, Sentence-Transformer 모델로 임베딩하여 FAISS 벡터 DB를 구축한다.

2.  **V4 통합 대시보드 (`V4_dashboard.py`)**
    - **사이드바 메뉴**: 사용자는 사이드바를 통해 4개의 주요 기능 페이지(실시간 관제, 상세 분석, 리포팅, 사고 대응)를 선택한다.
    - **페이지별 기능 수행**:
        - **실시간 관제**: 선택된 CSV 로그를 스트리밍하며 `V4_log_analyzer`를 통해 실시간 분석. 고위험군 탐지 시 모달 경고 및 '사고 대응' 페이지로 데이터 전달.
        - **상세 분석**: 사용자가 업로드한 CSV를 `V4_log_analyzer`로 심층 분석 후, 결과를 시각화하고 `output_analysis` 폴더에 저장.
        - **리포팅**: 저장된 분석 결과를 불러와 시각화하고, OpenAI GPT 모델을 호출하여 전문 분석 보고서 생성.
        - **사고 대응**: 전달받은 위협 정보를 기반으로 IP 차단(블랙리스트 관리), 네트워크 격리 등 대응 조치 시뮬레이션 수행.

---

## 3. 핵심 기능 명세 (최종)

### 3.1. F-1: 실시간 보안 관제 페이지
- **요구사항**: 실시간으로 유입되는 로그를 분석하고 시각화하며, 위험 요소를 즉시 알린다.
- **구현 기능**:
    - CSV 파일 기반 로그 스트리밍 시뮬레이션.
    - 실시간 탐지 현황, 확신도 추이, 공격 유형 분포 차트 제공.
    - `streamlit-modal`을 사용한 고위험군 경고 팝업.
    - `st.session_state`를 활용한 '사고 대응' 페이지로의 데이터 전달 및 자동 이동.

### 3.2. F-2: 상세 로그 분석 페이지
- **요구사항**: 대용량 로그 파일에 대한 심층 분석 및 결과 리포팅.
- **구현 기능**:
    - `st.file_uploader`를 통한 CSV 파일 업로드.
    - 샘플링 옵션을 제공하여 빠른 테스트 또는 전체 분석 선택 가능.
    - 분석 결과를 파이, 바, 히스토그램 등 다양한 차트로 시각화.
    - 분석 결과(CSV)를 `output_analysis` 디렉토리에 타임스탬프와 함께 저장 및 다운로드 기능 제공.

### 3.3. F-3: 리포팅 및 인사이트 페이지
- **요구사항**: 과거 분석 데이터를 기반으로 트렌드를 파악하고, AI를 통해 통찰력을 얻는다.
- **구현 기능**:
    - `output_analysis` 폴더의 분석 결과 파일을 드롭다운으로 선택.
    - 선택된 데이터에 대한 Treemap, Scatter plot 등 고급 시각화 제공.
    - OpenAI `gpt-4o-mini` API를 연동하여, 분석 데이터 요약 및 구체적인 권장 조치가 포함된 전문 보고서 자동 생성.
    - 생성된 보고서 Markdown 파일 다운로드 기능.

### 3.4. F-4: 사고 대응 페이지
- **요구사항**: 탐지된 위협에 대해 즉각적인 대응 조치를 수행하고 관리한다.
- **구현 기능**:
    - `st.session_state`를 통해 전달받은 위협 정보 표시.
    - `blacklist.txt` 파일을 읽고 쓰는 IP 블랙리스트 관리 기능.
    - 네트워크 격리, IP 차단 등 대응 조치를 `st.progress`를 통해 시각적으로 시뮬레이션.

---

## 4. 최종 산출물 (파일 목록)

- `V4_dashboard.py`: **메인 통합 대시보드 (Streamlit Multi-Page App)**
- `V4_log_analyzer.py`: **통합 로그 분석 엔진**
- `vector_db_builder.py`: FAISS 인덱스 생성기
- `requirements.txt`: 필요 라이브러리 목록
- `README.md`, `PROJECT_PLAN.md`, `PROJECT_SUMMARY.md`, `요구사항_정의서.md`: 프로젝트 문서
- `.env.example`: 환경 변수 예시 파일
- `blacklist.txt`: IP 차단 목록 (자동 생성)
- `output_analysis/`: 상세 분석 결과 저장 디렉토리
- `vector_db/`: FAISS 인덱스 저장 디렉토리
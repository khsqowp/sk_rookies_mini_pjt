# 🚀 V4 통합 보안 대시보드

FAISS 벡터 DB와 LLM을 활용하여 네트워크 위협을 탐지, 분석, 대응하는 Streamlit 기반의 통합 보안 관제 시스템입니다.

![Python](https://img.shields.io/badge/Python-3.13-blue)
![Streamlit](https://img.shields.io/badge/Streamlit-1.35.0-red)
![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4o--mini-blueviolet)
![FAISS](https://img.shields.io/badge/FAISS-1.8.0-yellowgreen)
![License](https://img.shields.io/badge/License-MIT-yellow)

## 📋 목차
- [주요 기능](#-주요-기능)
- [시스템 아키텍처](#-시스템-아키텍처)
- [설치 방법](#-설치-방법)
- [사용 방법](#-사용-방법)
- [프로젝트 구조](#-프로젝트-구조)
- [기술 스택](#-기술-스택)

---

## ✨ 주요 기능

V4 통합 보안 대시보드는 4개의 핵심 페이지로 구성되어 있습니다.

### 1. 📡 실시간 보안 관제
- **실시간 로그 스트리밍**: 지정된 CSV 파일의 로그를 실시간으로 처리 및 분석합니다.
- **동적 시각화**: 탐지된 위협의 확신도 추이와 공격 유형 분포를 실시간 차트로 시각화합니다.
- **고위험 위협 경고**: 설정된 임계값을 초과하는 위협 탐지 시, 즉시 모달(Modal) 창으로 경고합니다.
- **사고 대응 연계**: 경고 모달에서 버튼 클릭 한 번으로 '사고 대응' 페이지로 즉시 이동하여 대응을 시작할 수 있습니다.

### 2. 🔍 상세 로그 분석
- **파일 기반 심층 분석**: 사용자가 업로드한 대용량 CSV 로그 파일 전체를 심층 분석합니다.
- **다각적 분석 리포트**: 악성/정상 비율, 공격 유형 분포, 탐지 확신도 등 다각적인 분석 결과를 시각화하여 제공합니다.
- **결과 저장 및 다운로드**: 분석된 결과는 `output_analysis` 폴더에 CSV 파일로 자동 저장되며, UI를 통해 다운로드할 수 있습니다.

### 3. 📄 리포팅 및 인사이트
- **과거 분석 데이터 활용**: '상세 로그 분석'을 통해 저장된 과거 분석 결과를 불러와 시각화하고 추이를 분석합니다.
- **AI 기반 자동 리포트 생성**: OpenAI의 `gpt-4o-mini` 모델을 활용하여, 분석 데이터에 대한 전문적인 분석과 권장 조치 사항이 포함된 보고서를 자동으로 생성합니다.
- **보고서 다운로드**: 생성된 AI 리포트는 Markdown 형식으로 다운로드할 수 있습니다.

### 4. 🚨 사고 대응
- **위협 정보 브리핑**: '실시간 보안 관제'에서 전달받은 위협(공격 유형, IP, 탐지 확신도 등)의 상세 정보를 확인합니다.
- **IP 블랙리스트 관리**: 버튼 클릭으로 위협의 출발지 IP를 `blacklist.txt` 파일에 즉시 추가하고 관리할 수 있습니다.
- **대응 조치 시뮬레이션**: '네트워크 격리', '의심 IP 차단', '백업 데이터 복구' 등 주요 사고 대응 조치를 시뮬레이션으로 수행하며 진행 상황을 시각적으로 확인할 수 있습니다.

---

## 🏗️ 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│                     사용자 (보안 분석가)                   │
└───────────────────┬─────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────────┐
│           V4_dashboard.py (Streamlit Multi-Page App)    │
│ ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌──────────┐ │
│ │ 실시간 관제 │ │ 상세 분석  │ │  리포팅   │ │ 사고 대응 │ │
│ └───────────┘ └───────────┘ └───────────┘ └──────────┘ │
└───────────────────┬─────────────────────────────────────┘
                    │ (분석 요청)
                    ▼
┌─────────────────────────────────────────────────────────┐
│             V4_log_analyzer.py (분석 엔진)               │
│  ┌──────────────────────────────────────────────────┐   │
│  │ 1. 로그 텍스트 변환                               │   │
│  │ 2. 텍스트 임베딩 (Sentence-Transformer)           │   │
│  │ 3. FAISS DB 유사도 검색 (Top-K)                   │   │
│  │ 4. 공격 유형 분류 및 확신도 계산                   │   │
│  │ 5. AI 리포트 생성 (OpenAI GPT)                    │   │
│  └──────────────────────────────────────────────────┘   │
└───────────────────┬─────────────────────────────────────┘
                    │ (유사도 검색)
                    ▼
┌─────────────────────────────────────────────────────────┐
│              FAISS Vector DB (500,000+ vectors)         │
└─────────────────────────────────────────────────────────┘
```

---

## 🚀 설치 방법

### 1. 저장소 클론
```bash
git clone <repository-url>
cd Mini_PJT2
```

### 2. 가상환경 생성 및 활성화
```bash
python3 -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
```

### 3. 의존성 패키지 설치
```bash
pip install -r requirements.txt
```

### 4. 환경변수 설정
`.env.example` 파일을 복사하여 `.env` 파일을 생성하고, 파일 내에 자신의 OpenAI API 키를 입력합니다.
```bash
cp .env.example .env
```

### 5. 벡터 DB 생성 (최초 1회)
대용량 CSV 파일들을 기반으로 FAISS 벡터 데이터베이스를 생성합니다.
```bash
python vector_db_builder.py
```
> ⏱️ **소요 시간**: 약 30-60분 (시스템 사양 및 데이터셋 크기에 따라 다름)

---

## 📖 사용 방법

### 1. 대시보드 실행
아래 명령어를 터미널에 입력하여 Streamlit 애플리케이션을 실행합니다.
```bash
streamlit run V4_dashboard.py
```
브라우저가 자동으로 열리며 `http://localhost:8501` 주소로 대시보드에 접속됩니다.

### 2. 기능 사용
- **실시간 관제**: 사이드바에서 분석할 로그 파일을 선택하고 '시작/중지' 버튼으로 시뮬레이션을 제어합니다. 고위험 위협이 탐지되면 모달 창이 나타납니다.
- **상세 로그 분석**: 분석하고 싶은 CSV 파일을 업로드하고 '분석 시작' 버튼을 클릭합니다.
- **리포팅 및 인사이트**: 드롭다운 메뉴에서 과거에 분석한 리포트를 선택하고, 'AI 리포트 생성' 버튼을 클릭합니다.
- **사고 대응**: 실시간 관제 중 위협이 탐지되면 자동으로 페이지가 이동되며, 해당 위협에 대한 대응 조치를 수행할 수 있습니다.

---

## 📁 프로젝트 구조

```
Mini_PJT2/
├── V4_dashboard.py              # 메인 대시보드 (Streamlit Multi-Page App)
├── V4_log_analyzer.py           # 통합 로그 분석 엔진
├── vector_db_builder.py         # 벡터 DB 생성 스크립트
├── requirements.txt             # 의존성 패키지 목록
├── .env.example                 # 환경변수 예시
├── .gitignore                   # Git 제외 파일 목록
├── README.md                    # 프로젝트 문서
│
├── CSV Files/                   # 분석용 CSV 데이터셋 폴더
│   ├── Adware/
│   ├── Benign/
│   ├── Ransomware/
│   └── ...
│
├── vector_db/                   # 생성된 벡터 DB 저장소
│   └── faiss_index/
│
├── output_analysis/             # '상세 로그 분석' 결과 저장 폴더
└── .venv/                       # 가상환경 (Git 추적 제외)
```

---

## 🛠️ 기술 스택

- **언어**: Python 3.13
- **웹 프레임워크**: Streamlit 1.35.0
- **AI / 머신러닝**:
  - **FAISS (Facebook AI Similarity Search)**: 초고속 벡터 유사도 검색
  - **Sentence-Transformers**: 텍스트 임베딩
  - **OpenAI API**: `gpt-4o-mini` 모델 기반 AI 리포트 생성
  - **Pandas, NumPy**: 데이터 처리 및 분석
- **시각화**: Plotly
- **UI 컴포넌트**: Streamlit-Modal

---

**🛡️ AI와 함께 더 안전한 네트워크 환경을 만들어갑니다!**